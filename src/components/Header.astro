---
const currentPath = Astro.url.pathname;
const navItems = [
	{ href: '/work', label: 'Work' },
	{ href: '/services', label: 'Services' },
	{ href: '/pricing', label: 'Pricing' },
	{ href: '/resources', label: 'Resources' },
	{ href: '/about', label: 'About' },
];
---

<header class="sticky top-0 z-50 bg-paper/95 backdrop-blur-sm border-b border-slate-200/80">
	<nav class="container py-4 md:py-6">
		<div class="flex items-center justify-between">
			<a href="/" class="text-xl font-semibold tracking-tight text-ink no-underline hover:no-underline transition-opacity hover:opacity-80">
				ELAREN STUDIO
			</a>
			<div class="hidden md:flex items-center gap-6">
				{navItems.map((item) => (
					<a
						href={item.href}
						class:list={[
							"text-sm font-medium no-underline transition-colors",
							currentPath.startsWith(item.href) ? "text-accent" : "text-ink hover:text-ink/80",
						]}
					>
						{item.label}
					</a>
				))}
				<a
					href="/contact"
					class="px-5 py-2.5 bg-accent text-paper rounded-xl text-sm font-semibold no-underline shadow-lg shadow-accent/40 hover:shadow-xl hover:shadow-accent/50 hover:-translate-y-0.5 transition-all duration-200"
				>
					Start a project
				</a>
			</div>
			<button
				class="md:hidden text-ink hover:text-accent transition-colors"
				aria-label="Open menu"
				aria-expanded="false"
				id="mobile-menu-toggle"
			>
				<svg class="w-6 h-6 menu-icon-open" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
				</svg>
				<svg class="w-6 h-6 menu-icon-close hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
				</svg>
			</button>
		</div>
	</nav>

	<div id="mobile-menu" class="md:hidden hidden border-t border-slate-200/80 bg-paper">
		<div class="container py-4 flex flex-col gap-1">
			{navItems.map((item) => (
				<a
					href={item.href}
					class:list={[
						"block py-3 px-2 text-base font-medium no-underline rounded-lg transition-colors",
						currentPath.startsWith(item.href)
							? "text-accent bg-accent/5"
							: "text-ink hover:text-accent hover:bg-accent/5",
					]}
				>
					{item.label}
				</a>
			))}
			<div class="pt-3 mt-2 border-t border-slate-200/60">
				<a
					href="/contact"
					class="block text-center px-5 py-3 bg-accent text-paper rounded-xl text-base font-semibold no-underline shadow-lg shadow-accent/40"
				>
					Start a project
				</a>
			</div>
		</div>
	</div>
</header>

<script>
	const toggle = document.getElementById("mobile-menu-toggle");
	const menu = document.getElementById("mobile-menu");
	const iconOpen = toggle?.querySelector(".menu-icon-open");
	const iconClose = toggle?.querySelector(".menu-icon-close");

	toggle?.addEventListener("click", () => {
		const isOpen = menu?.classList.toggle("hidden") === false;
		toggle.setAttribute("aria-expanded", String(isOpen));
		toggle.setAttribute("aria-label", isOpen ? "Close menu" : "Open menu");
		iconOpen?.classList.toggle("hidden", isOpen);
		iconClose?.classList.toggle("hidden", !isOpen);
	});
</script>

