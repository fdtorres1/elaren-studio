---
import { resolveIcon } from '../../lib/icons';

interface CardItem {
	title: string;
	desc: string;
	icon?: string;
}

interface Props {
	bg?: 'paper' | 'muted';
	kicker: string;
	title: string;
	items: CardItem[];
	cardBg?: 'paper' | 'slate';
}

const { bg = 'muted', kicker, title, items, cardBg = 'paper' } = Astro.props;

const bgClass = bg === 'muted' ? 'relative py-16 md:py-24 overflow-hidden' : 'bg-paper py-16 md:py-24';
const bgStyle = bg === 'muted' ? 'background-color: var(--clr-muted);' : undefined;
const cardBgClass = cardBg === 'slate' ? 'bg-slate-50' : 'bg-paper';
---

<section class={bgClass} style={bgStyle}>
	{bg === 'muted' && (
		<div class="absolute top-0 right-0 w-96 h-96 bg-slate-300/25 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
	)}
	<div class="container relative z-10">
		<div class="max-w-3xl mx-auto">
			<p class="text-sm font-medium text-accent uppercase tracking-wider mb-3">{kicker}</p>
			<h2 class="text-2xl md:text-3xl font-semibold mb-8 text-ink">{title}</h2>
			<div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
				{items.map((item) => (
					<div class={`${cardBgClass} rounded-xl border-2 border-slate-200 p-6 shadow-sm`}>
						{item.icon && (
							<div class="w-10 h-10 bg-accent/10 rounded-xl flex items-center justify-center mb-4">
								<svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={resolveIcon(item.icon)} />
								</svg>
							</div>
						)}
						<h3 class="font-semibold text-ink mb-2">{item.title}</h3>
						<p class="text-sm text-ink/70">{item.desc}</p>
					</div>
				))}
			</div>
			<slot />
		</div>
	</div>
</section>
